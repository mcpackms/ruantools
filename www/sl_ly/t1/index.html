<!DOCTYPE html>
<html lang="zh-CN">
<head>
        <!-- SPDX-FileCopyrightText: 2026 联电远连 <work_rrvv@hotmi@hotmail.com> -->
    <!-- SPDX-License-Identifier: Apache-2.0 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>头像查找器</title>
    <style>
        :root {
            --primary-color: #6c5ce7;
            --primary-dark: #5b4bc4;
            --bg-color: #0f1419;
            --card-bg: #1a1f2e;
            --text-color: #e6e9f0;
            --text-muted: #8a94a7;
            --success-color: #00d2a8;
            --error-color: #ff6b6b;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 1rem;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(108, 92, 231, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(0, 210, 168, 0.05) 0%, transparent 20%);
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        header {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        .search-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        input {
            flex: 1;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            color: var(--text-color);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.2);
        }
        
        button {
            padding: 1rem 2rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
        }
        
        button:disabled {
            background: #4a5568;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .copy-btn {
            padding: 0.5rem 1rem;
            background: rgba(108, 92, 231, 0.2);
            border: 1px solid var(--primary-color);
            font-size: 0.85rem;
        }
        
        .copy-btn:hover {
            background: var(--primary-color);
        }
        
        .copy-btn.copied {
            background: var(--success-color);
            border-color: var(--success-color);
        }
        
        .loading {
            display: none;
            justify-content: center;
            margin: 2rem 0;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(108, 92, 231, 0.3);
            border-left: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .result-container {
            display: none;
            margin-top: 2rem;
        }
        
        .result-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--text-muted);
        }
        
        .avatar-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }
        
        .avatar-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .avatar-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .avatar-img-container {
            position: relative;
            width: 100%;
            height: 150px;
            overflow: hidden;
        }
        
        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: var(--transition);
        }
        
        .avatar-img:hover {
            transform: scale(1.05);
        }
        
        .avatar-info {
            padding: 1rem;
        }
        
        .avatar-link {
            display: block;
            font-size: 0.85rem;
            color: var(--text-muted);
            text-decoration: none;
            word-break: break-all;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }
        
        .avatar-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .error-message {
            background: rgba(255, 107, 107, 0.1);
            border-left: 4px solid var(--error-color);
            padding: 1.5rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            margin-top: 2rem;
            display: none;
        }
        
        .success-message {
            background: rgba(0, 210, 168, 0.1);
            border-left: 4px solid var(--success-color);
            padding: 1.5rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            margin-top: 2rem;
            display: none;
        }
        
        .info-text {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 1rem;
            text-align: center;
        }
        
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--success-color);
            color: white;
            padding: 1rem 2rem;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
            z-index: 1000;
            opacity: 0;
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .avatar-list {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .avatar-actions {
                flex-direction: column;
            }
        }
        
        footer {
            margin-top: auto;
            padding-top: 2rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>头像查找器</h1>
            <p class="subtitle">输入用户ID，查找相关头像图片</p>
        </header>
        
        <div class="search-card">
            <div class="input-group">
                <input type="text" id="userId" placeholder="请输入用户ID数字" autocomplete="off">
                <button id="searchBtn">
                    <span>查找头像</span>
                </button>
            </div>
            
            <p class="info-text">基于 http://a.ruansky.com/user/ 的用户头像查找工具</p>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h3 class="result-title">找到的头像图片</h3>
            <div class="avatar-list" id="avatarList"></div>
        </div>
        
        <div class="error-message" id="errorMessage">
            <strong>失败了呢</strong>
            <p>可能是土豆服务器发力了
            也可能网不好
            或输入的用户ID不存在</p>
        </div>
        
        <div class="success-message" id="successMessage">
            <strong>查找成功！</strong>
            <p>已找到相关头像图片，结果如上所示</p>
        </div>
    </div>
    
    <div class="toast" id="toast">链接已复制到剪贴板！</div>
    
    <footer>
        <p>头像查找器 &copy; 一支电笔</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userIdInput = document.getElementById('userId');
            const searchBtn = document.getElementById('searchBtn');
            const loading = document.getElementById('loading');
            const resultContainer = document.getElementById('resultContainer');
            const avatarList = document.getElementById('avatarList');
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            const toast = document.getElementById('toast');
            
            // 添加搜索功能
            searchBtn.addEventListener('click', searchAvatar);
            userIdInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchAvatar();
                }
            });
            
            // 显示Toast提示
            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 2000);
            }
            
            // 复制链接功能
            function copyToClipboard(text) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast('链接已复制到剪贴板！');
                }).catch(err => {
                    console.error('复制失败: ', err);
                    showToast('复制失败');
                });
            }
            
            function searchAvatar() {
                const userId = userIdInput.value.trim();
                
                if (!userId) {
                    showError('请输入有效的用户ID');
                    return;
                }
                
                // 显示加载状态
                loading.style.display = 'flex';
                resultContainer.style.display = 'none';
                errorMessage.style.display = 'none';
                successMessage.style.display = 'none';
                searchBtn.disabled = true;
                
                // 构建目标URL
                const targetUrl = `http://a.ruansky.com/user/${userId}/`;
                const searchPattern = 'ksyun.bbs-img.zsdown.com/upload';
                
                // 使用CORS代理绕过跨域限制
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                const fullUrl = proxyUrl + encodeURIComponent(targetUrl);
                
                // 发送请求
                fetch(fullUrl)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('网络响应不正常');
                        }
                        return response.text();
                    })
                    .then(data => {
                        // 使用正则表达式匹配图片链接
                        const regex = new RegExp(`https?://${searchPattern}[^"\\s]*`, 'g');
                        const matches = data.match(regex);
                        
                        // 隐藏加载状态
                        loading.style.display = 'none';
                        searchBtn.disabled = false;
                        
                        if (matches && matches.length > 0) {
                            // 显示结果
                            displayResults(matches);
                        } else {
                            showError('失败了呢 www 可能是土豆服务器发力了');
                        }
                    })
                    .catch(error => {
                        console.error('错误:', error);
                        loading.style.display = 'none';
                        searchBtn.disabled = false;
                        showError('请求失败，请检查网络连接或稍后再试');
                    });
            }
            
            function displayResults(links) {
                avatarList.innerHTML = '';
                
                links.forEach(link => {
                    const avatarItem = document.createElement('div');
                    avatarItem.className = 'avatar-item';
                    
                    // 图片容器
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'avatar-img-container';
                    
                    const avatarImg = document.createElement('img');
                    avatarImg.className = 'avatar-img';
                    avatarImg.src = link;
                    avatarImg.alt = '头像图片';
                    avatarImg.onerror = function() {
                        this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSIxNTAiIGZpbGw9IiMxYTFmMmUiLz48cGF0aCBkPSJNNzUgNzVMMTA1IDQ1TTc1IDc1TDQ1IDQ1TTc1IDc1TDEwNSAxMDVNIDc1IDc1TDQ1IDEwNSIgc3Ryb2tlPSIjOGExNDNhIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=';
                    };
                    
                    imgContainer.appendChild(avatarImg);
                    
                    // 信息容器
                    const infoContainer = document.createElement('div');
                    infoContainer.className = 'avatar-info';
                    
                    const avatarLink = document.createElement('a');
                    avatarLink.className = 'avatar-link';
                    avatarLink.href = link;
                    avatarLink.target = '_blank';
                    avatarLink.textContent = link.split('/').pop();
                    avatarLink.title = link;
                    
                    // 操作按钮容器
                    const actionsContainer = document.createElement('div');
                    actionsContainer.className = 'avatar-actions';
                    
                    const viewBtn = document.createElement('a');
                    viewBtn.className = 'copy-btn';
                    viewBtn.href = link;
                    viewBtn.target = '_blank';
                    viewBtn.textContent = '查看原图';
                    viewBtn.style.textDecoration = 'none';
                    viewBtn.style.color = 'white';
                    viewBtn.style.textAlign = 'center';
                    
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'copy-btn';
                    copyBtn.textContent = '复制链接';
                    copyBtn.addEventListener('click', function() {
                        copyToClipboard(link);
                    });
                    
                    actionsContainer.appendChild(viewBtn);
                    actionsContainer.appendChild(copyBtn);
                    
                    infoContainer.appendChild(avatarLink);
                    infoContainer.appendChild(actionsContainer);
                    
                    avatarItem.appendChild(imgContainer);
                    avatarItem.appendChild(infoContainer);
                    avatarList.appendChild(avatarItem);
                });
                
                resultContainer.style.display = 'block';
                successMessage.style.display = 'block';
            }
            
            function showError(message) {
                errorMessage.querySelector('p').textContent = message;
                errorMessage.style.display = 'block';
            }
        });
    </script>
<p style="font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;font-size:14px;color:#333;text-align:center;line-height:1.6;margin:1em 0">© 2023-2025 sl_ly. Licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer" style="color:#0366d6;text-decoration:none;font-weight:500">Apache 2.0</a>.</p>

</body>
</html>
